getAccountHashedPassword=SELECT userId, password FROM Users WHERE username= ?
getPlaylistOwnerId=SELECT ownerId FROM UserPlaylist WHERE playlistId = ?
getPlaylistsOwnedByUserId=SELECT UP.playlistId AS 'id', UP.playlistName AS 'name', ISNULL(SUM(T.duration), 0) AS 'playlistDuration' FROM UserPlaylist UP INNER JOIN Users U ON UP.ownerId = U.userId FULL OUTER JOIN Playlist P ON UP.playlistId = P.playlistId FULL OUTER JOIN Track T ON P.trackId = T.trackId WHERE U.userId = ? GROUP BY UP.playlistId, UP.playlistName
createNewPlaylist=INSERT INTO UserPlaylist (ownerId, playlistName) VALUES (?, ?) SET NOCOUNT ON
deletePlaylist=DELETE FROM Playlist WHERE playlistId = ? DELETE FROM UserPlaylist WHERE playlistId = ?
modifyPlaylist=UPDATE UserPlaylist SET playlistName = ? WHERE playlistId = ? SET NOCOUNT ON
getTracksInPlaylist=SELECT T.trackId AS 'id', T.title, STRING_AGG(A.artistFirstName + ' ' + A.artistLastName, ', ') AS 'performer', T.duration, Al.albumName AS 'album', T.playcount, T.publicationDate, T.description, T.offlineAvailable FROM Playlist P INNER JOIN Track T ON P.trackId = T.trackId INNER JOIN TrackArtist TA ON T.trackId = TA.trackId INNER JOIN Artist A ON TA.artistId = A.artistId INNER JOIN Album Al ON Al.albumId = T.album WHERE playlistId = ? GROUP BY T.trackId, T.title, T.duration, Al.albumName, T.publicationDate, T.playcount, T.description, T.offlineAvailable
getTracksNotInPlaylist=SELECT TOP 10 T.trackId AS 'id', T.title, STRING_AGG(A.artistFirstName + ' ' + A.artistLastName, ', ') AS 'performer', T.duration, Al.albumName AS 'album', T.playcount, T.publicationDate, T.description, T.offlineAvailable FROM Track T LEFT JOIN TrackArtist TA ON T.trackId = TA.trackId INNER JOIN Artist A ON TA.artistId = A.artistId INNER JOIN Album Al ON Al.albumId = T.album WHERE T.trackId NOT IN ( SELECT T.trackId  FROM Playlist P INNER JOIN Track T ON P.trackId = T.trackId INNER JOIN TrackArtist TA ON T.trackId = TA.trackId INNER JOIN Artist A ON TA.artistId = A.artistId INNER JOIN Album Al ON Al.albumId = T.album WHERE playlistId = ? ) GROUP BY T.trackId, T.title, T.duration, Al.albumName, T.publicationDate, T.playcount, T.description, T.offlineAvailable
addTrackToPlaylist=IF EXISTS ( SELECT playlistId FROM UserPlaylist WHERE ownerId = ? AND playlistId = ? ) BEGIN INSERT INTO Playlist (playlistId, trackId) VALUES (?, ?) END SET NOCOUNT ON
deleteTrackInPlaylist=DELETE FROM Playlist WHERE playlistId = ? AND trackId = ?